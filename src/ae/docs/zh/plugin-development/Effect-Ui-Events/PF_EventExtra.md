---
title: PF_EventExtra
order: 3
category:
  - AE 插件开发
---

# PF_EventExtra

这个结构提供了当前事件的上下文信息。After Effects 在[Entry Point](../effect-basics/entry-point.html)函数的额外参数中传递一个指向这个结构的指针。

`PF_EventUnion`(在`PF_EventExtra`中发送)随事件类型而变化，包含该事件的特定信息。

| **Member**       | **Purpose**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ---------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `contextH `      | Handle to the PF_Context `.`<br />`This drawing context is used with the [Drawbot suites](https://ae-plugins.docsforadobe.dev/effect-ui-events/custom-ui-and-drawbot.html#effect-ui-events-custom-ui-and-drawbot) for drawing, and also for the [UI Callbacks](https://ae-plugins.docsforadobe.dev/effect-ui-events/ui-callbacks.html#effect-ui-events-ui-callbacks).                                                                                                                                                                                                                                          |
| `e_type `        | Which[event](https://ae-plugins.docsforadobe.dev/effect-ui-events/effect-ui-events.html#effect-ui-events-effect-ui-events) is occurring.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `effect_win `    | A PF_EffectWindowInfo ` about the event if it occurs within the effects window.`<br />`Otherwise, as of After Effects 5.0, effect_win can be replaced by a PF_WindowUnion `.<br />This struct contains both a PF_EffectWindowInfo `and an PF_ItemWindowInfo`, which (for now) is simply the port rectangle for the item window.<br />Replacement only occurs if PF_USE_NEW_WINDOW_UNION `was defined during compilation; otherwise, it will continue to be just a PF_EffectWindowInfo`.                                                                                                                        |
| `evt_in_flags `  | Event Input Flags. This currently contains only one value,PF_EI_DONT_DRAW`, which you should check before drawing!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `evt_out_flags ` | One or more of the following, combined with a bitwise OR operation:><br />*PF_EO_NONE `*PF_EO_HANDLED_EVENT `tells After Effects you’ve handled the event.<br />*PF_EO_ALWAYS_UPDATE`forces After Effects to rerender the composite in response to every click or drag; this is the same behavior generated by ‘alt-scrubbing’ the parameter value.\* PF_EO_NEVER_UPDATE` prevents After Effects from rerendering the composite until the user stops clicking and dragging.<br /> PF_EO_UPDATE_NOW` tells After Effects to update the view immediately after the event returns after calling PF_InvalidateRect |

## PF_Context

PF_Context 详细说明了事件的 UI 环境。

| **Member** | **Purpose**    |
| ---------- | -------------- |
| `magic `   | Do not change. |

## PF_EffectWindowInfo

如果一个事件发生在 ECP 中，PF_EffectWindowInfo 将在 PF_EventExtra 中发送。

| **Member**                                                                            | **Purpose**                                                                                                                                |
| ------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| `index`                                                                               | This indicates which parameter in the effect window is being affected. The controls are numbered from 0 to the number of controls minus 1. |
| `area`                                                                                | This indicates if the control title (`PF_EA_PARAM_TITLE`) or the control itself (`PF_EA_CONTROL`) are being affected.                      |
| The title is the area still visible when the parameter’s topic (“twirly”) is spun up. |                                                                                                                                            |
| `current_frame`                                                                       | A PF_Rect indicating the full frame of the area occupied by the control.                                                                   |
| `param_title_frame`                                                                   | A PF_Rect indicating the title area of the control.                                                                                        |
| `horiz_offset`                                                                        | A horizontal offset from the left side of the title area in which to draw into the title.                                                  |
