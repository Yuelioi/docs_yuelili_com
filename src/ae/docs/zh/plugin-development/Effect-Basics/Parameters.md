---
title: Parameters
order: 7
category:
  - AE 插件开发
---
# Parameters

参数是随时间变化的数值流；源图像、滑块、角度、点、颜色、路径，以及用户可以操作的任何任意数据类型。

它们以PF_ParamDefs数组的形式传递给插件，尽管数组中的值只在某些选择器中有效。

After Effects特效API最好的方面之一是参数插值和管理。

在29.97帧的四分之一时间里，快门角度有多大变化？不是你的问题，交给After Effects吧。

在[PF_Cmd_PARAM_SETUP](command-selectors.html)期间，使用[PF_ADD_PARAM](.../effect-details/interaction-callback-functions.html)描述你插件中的参数。

你最多可以有（大约）38 kajillion个参数，或者说你的用户在要求退款之前愿意筛选多少就有多少。明智的选择。

在注册PF_ParamDefs之前，用AEFX_CLR_STRUCT（定义在AE_Macros.h）清除它们，可以避免无数的问题。

## Parameter Types

| **Parameter Type** | **Parameter Type** | **PF_ParamDefUnion Member** | **Param Value Data Type** | **Description** |
| --- | --- |--- | --- | --- |
| `PF_Param_LAYER` | [PF_LayerDef](https://ae-plugins.docsforadobe.dev/effect-basics/PF_EffectWorld.html#effect-basics-pf-effectworld) | `ld` | `A_long` | Image and audio layers in the composition. All effects automatically have at least 1 layer parameter, param[0], the layer to which they are applied.`<br />`When used as effect parameters, these appear as a pull-down menu with which the user selects a layer within the current composition.`<br />`The pull-down menu contents are generated by After Effects.`<br />`NOTE: This is a reference to a layer which contains pixels and audio samples, not actual pixels and audio samples. |
| `PF_Param_SLIDER` | `PF_SliderDef` | `sd` | `long` | No longer used. |
| `PF_Param_FIX_SLIDER` | `PF_FixedSliderDef` | `fd` | `PF_Fixed` | Deprecated. For many years, we promoted fixed sliders. We now recommend `PF_Param_FLOAT_SLIDERs`.`<br />`The additional precision helps in many situations, and isn’t as expensive as it once was. Plus, we’re just tired of low byte / high byte silliness.`<br />FIX_SLIDERs` provide higher precision than `PF_Param_SLIDER`. Specify the UI decimal places independently. Ignore the low word of the `PF_Fixed` to get integral results. |
| `PF_Param_FLOAT_SLIDER` | `PF_FloatSliderDef` | `fs_d` | `PF_FPLong` | Sliders represent numerical values.`FLOAT_SLIDERs` contain values for phase, precision, and curve tolerance for use by audio filters.`<br />`Specify a minimum and maximum value, and the user can move a slider or types a number to specify the setting.`br` also respond to slider flags discussed in [Audio Filters](https://ae-plugins.docsforadobe.dev/audio/audio-considerations.html#audio-audio-considerations). |
| `PF_Param_ANGLE` | `PF_AngleDef` | `ad` | `PF_Fixed` | Angles in (fixed point) degrees, accurate to small fractions of a degree.`<br />`Users can specify multiple revolutions, resulting in values greater than 360. |
| `PF_Param_CHECKBOX` | `PF_CheckBoxDef` | `bd` | `PF_Boolean` | `PF_ParamFlag_CANNOT_INTERP` is forced on for all checkboxes. |
| `PF_Param_COLOR` | `PF_ColorDef` | `cd` | `PF_Pixel` | RGB value (alpha is not used) that the user can choose either with the standard color picker or with an eye dropper tool.`<br />`For floating point accuracy, use[PF_ColorParamSuite1](https://ae-plugins.docsforadobe.dev/effect-details/parameters-floating-point-values.html#effect-details-parameters-floating-point-values-pf-colorparamsuite) to retrieve the values. |
| `PF_Param_POINT` | `PF_PointDef` | `td` | `PF_Fixed` | A two-dimensional point. The point provides x and y values in destination layer space.`<br />`The origin of the layer is the upper-left hand corner, with x increasing to the right, y increasing down.`<br />`Starting in CS5.5, for floating point accuracy, use[PF_PointParamSuite1](https://ae-plugins.docsforadobe.dev/effect-details/parameters-floating-point-values.html#effect-details-parameters-floating-point-values-pf-pointparamsuite) to retrieve the values.`<br />`Dusty history lesson to follow: Prior to API specification version 12.1 (After Effects 4.0), the default value for the point was between 0 and 100 in fixed point with the radix point at bit 16 (i.e. standard fixed point).`<br />`Specifying (50,50) in fixed point yields the center of the image. The value you are returned for a point control is in absolute pixels with some number of bits of fixed point accuracy.`<br />`Thus, if you gave (50,50) as the default position and the user applied the effect to a 640 by 480 layer, the default value you would be sent would be (320, 240) in Fixed point.`<br />`Plug-ins which specify API versions before 12.1 will still get the old behavior. |
| `PF_Param_POPUP` | `PF_PopupDef` | `pd` | `A_long` | List of choices. Build a string in namesptr containing a list of (read-only) pop-up entries (“Entry1 / Entry2 / Entry3”).`<br />`After Effects copies the data and creates a pop-up menu.`<br />`These entries cannot be modified once the parameter is added.`<br />`An entry of “(-” will result in a separator being drawn between previous and subsequent entries. |
| `PF_Param_ARBITRARY_DATA` | `PF_ArbitraryDef` | `arb_d` | `???` | Custom data type.`<br />`[Arbitrary Data Parameters](https://ae-plugins.docsforadobe.dev/effect-details/arbitrary-data-parameters.html#effect-details-arbitrary-data-parameters) contain an ID (you can use more than one custom data type in a given effect), a default value (so After Effects knows what your data type should start as), and a handle to your actual parameter.In AE, must specify either `PF_PUI_TOPIC` / `PF_PUI_CONTROL` or `PF_PUI_NO_ECW`.`<br />`In PPro 8.0 and later, it’s okay to set none of those flags, which allows you to see the parameter’s keyframe track on the right side of Effect Controls without creating a custom control. |
| `PF_Param_PATH` | `PF_PathDef` | `path_d` | `PF_PathID` | Path parameters are references to masks applied to the same layer as the effect.`<br />`Path parameter data cannot be accessed directly; use[PF_PathQuerySuite1](https://ae-plugins.docsforadobe.dev/effect-details/working-with-paths.html#effect-details-working-with-paths-pf-pathquerysuite) and [PF_PathDataSuite](https://ae-plugins.docsforadobe.dev/effect-details/working-with-paths.html#effect-details-working-with-paths-pf-pathdatasuite) to manage and inquire about paths.`br` contains the index of the mask selected by the user.`<br />`A corresponding `AEGP_MaskRefH` can be obtained using `AEGP_GetLayerMaskByIndex` from [AEGP_MaskSuite6](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-masksuite). |
| `PF_Param_GROUP_START` `PF_Param_GROUP_END` | (none) (none) | | | Parameter groups (topics) organize parameters into sets.`<br />`Each group receives its own twirly and will be indented in the ECP relative to the neighboring parameters or groups.`<br />`One group can be nested within another.`<br />`Each twirly can be spun open or closed by the user, or programatically by the effect.`<br />`The effect may choose to have certain groups initialized with the twirly spun open, and others with the twirly spun closed. |
| `PF_Param_BUTTON` | `PF_Button` | `button_d` | (no value) | A simple push button. Use[Parameter Supervision](https://ae-plugins.docsforadobe.dev/effect-details/parameter-supervision.html#effect-detals-parameter-supervision) to detect when the button is pressed.`<br />`New in CS5.5 to After Effects. |
| `PF_Param_POINT_3D` | `PF_Point3D` | `point3d_d` | `PF_FpLong<span> (3)` | A three-dimensional point.`<br />`New in CS5.5. Unsupported in Premiere Pro. |

## Slider Range Issues?

如果你的滑块似乎被禁用了，但没有灰掉，请检查valid_min、slider_min、valid_max和slider_max字段。这个参数是`PF_Param_FIX_SLIDER`吗？如果是，你是否将你的Mins和max转换为合理的固定值？如果你使用AE_Macros.h中提供的宏，它们期望接收的是整数；传递定点值是不行的。

## Point Parameter Origin

After Effects会修改任何点参数以考虑原点偏移，这些偏移是由修改输出尺寸的 "上游 "效果引入的。即使ECP用户界面显示点参数的值是(0,0)，偏移量已经被考虑进去了。