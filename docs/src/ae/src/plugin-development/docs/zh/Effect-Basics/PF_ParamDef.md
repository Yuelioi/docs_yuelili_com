---
title: PF_ParamDef
order: 8
category:
  - AE 插件开发
---

# PF_ParamDef

After Effects 在每个选择器中传递给特效一个 PF_ParamDefs 数组，描述了插件在当前时间的参数。params 数组中的值只在某些选择器中有效(这在[选择器描述](command-selectors.html)中已经注明)。

## Param Zero

第一个参数，params[0]，是输入的图像(一个[PF_EffectWorld / PF_LayerDef](PF_EffectWorld.html) )，这个效果应该被应用。

## The Rest Of The Parameters

所有的参数类型都由 PF_ParamDef 表示。使用联合体，所以只有 PF_ParamDef 的相关部分需要(或应该)被填充。

## PF_ParamDef Members

| **Data Type**                                                                                                                      | **Name**       | **Description**                                                                                                                                                                                                                                                                                                                                                                             |
| ---------------------------------------------------------------------------------------------------------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `A_long`                                                                                                                           | `id`           | The ID of this parameter. You can re-order parameters in future versions of your plug-in and not cause users to re-apply your effect,<br />if you maintain the parameter’s ID across versions.                                                                                                                                                                                              |
| `PF_ChangeFlags`                                                                                                                   | `change_flags` | Set if you’ve changed a parameter value. Only valid during drag (not click!) events,<br />[PF_Cmd_USER_CHANGED_PARAM](../effect-basics/command-selectors.html) or [PF_Cmd_UPDATE_PARAMS_UI](../effect-basics/command-selectors.html). |
| [PF_ParamUIFlags](../effect-basics/PF_ParamDef.html) | `ui_flags`     | Specify a parameter’s UI behavior before adding; only `PF_PUI_DISABLED` may be set during event handling.                                                                                                                                                                                                                                                                                   |
| `A_short`                                                                                                                          | `ui_width`     | Width of the parameter’s user interface (for non-standard parameters only).                                                                                                                                                                                                                                                                                                                 |
| `A_short`                                                                                                                          | `ui_height`    | Height of the parameter’s user interface (for non-standard parameters only).                                                                                                                                                                                                                                                                                                                |
| [PF_ParamType](../effect-basics/parameters.html)         | `param_type`   | Type of parameter.                                                                                                                                                                                                                                                                                                                                                                          |
| `A_char[32]`                                                                                                                       | `name`         | Name of parameter. Can be changed during event handling.<br />Yes, longer parameter names have been requested since After Effects 1.0.<br />Think of adequately describing your world-altering effect in 31 mere characters as a language challenge, like haiku.                                                                                                                            |
| [PF_ParamFlags](../effect-basics/PF_ParamDef.html)      | `flags`        | Specify a parameter’s UI behavior before adding; only `PF_ParamFlag_COLLAPSE_TWIRLY` may be set during event handling.                                                                                                                                                                                                                                                                      |
| `PF_ParamDefUnion`                                                                                                                 | `u`            | A union of all possible[Parameter Types](../effect-basics/parameters.html).<br />Only the type specified by `param_type` contains meaningful data.                                                                                                                                                                |

## Parameter UI Flags

用这些标志来控制一个参数的用户界面。

不要把用户界面标志和行为标志混为一谈；它们位于你的参数定义中的不同区域，如果应用不当，会导致不可预知的行为。

| **Flag**                    | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `PF_PUI_TOPIC`              | Set this flag if you handle `PF_Cmd_EVENTs` for the “topic” of the parameter.`<br />`The “topic” is the portion of the param UI in the Effect Controls Window (ECW) that is still visible when the twirly-arrow is twirled up for that param.`<br />`If you set this flag, you must also set `PF_OutFlag_CUSTOM_UI` at PF_Cmd_GLOBAL_SETUP time.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `PF_PUI_CONTROL`            | Set this flag if you handle `PF_Cmd_EVENTs` for the control area (area that becomes invisible when you twirl up a parameter’s spinner) in the ECP.`<br />`If you set this flag, you must also set `PF_OutFlag_CUSTOM_UI` at `PF_Cmd_GLOBAL_SETUP` time.`<br />`See [Effect UI &amp; Events](../effect-ui-events/effect-ui-events.html) for more details.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `PF_PUI_STD_CONTROL_ONLY`   | Set this flag if you want the standard control only – No data stream will be associated with this parameter, and thus no keyframes will be available in the Timeline panel.`<br />`You might want to do this to control something in your sequence data with a standard control.`<br />`Or in your arb data, or custom UI in the comp window, or to group-set multiple other controls.This flag cannot be used with:> `<br />`_`PF_Param_CUSTOM`,`<br />PF_Param_NO_DATA`,_ `<br />PF_Param_LAYER`,`<br />PF_Param_ARBITRARY_DATA`,`<br />` `PF_Param_PATH`.`<br />`If you set this flag, you must also set `PF_ParamFlag_SUPERVISE` (otherwise you would never find out about value changes, and the setting would never be used for anything).`<br />`This flag does not require that the [PF_OutFlag_CUSTOM_UI](../effect-basics/PF_OutData.html) flag be set.`<br />`If you want a standard control for `PF_Param_ARBITRARY_DATA`, just add one (or more) using `PF_PUI_STD_CONTROL_ONLY` with the supported param types, and then when handling [PF_Cmd_USER_CHANGED_PARAM](../effect-basics/command-selectors.html) you can modify your arb data. |
| `PF_PUI_NO_ECW_UI`          | Set this flag if you want no UI to appear in the Effect Controls Window.`<br />`Presumably, you are setting the value of the parameter through some other method (e.g. custom UI in the comp window, or while handling `PF_Cmd_USER_CHANGED_PARAM` for a different param with `PF_ParamFlag_SUPERVISE` set).`<br />`In AE, this doesn’t affect keyframe visibility in the timeline. In PPro it does remove the entire row, so you won’t see keyframes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_PUI_ECW_SEPARATOR`      | Not used in After Effects, but used in Premiere. Set this flag if you’d like a thick line above this parameter in the effect control window.This is provided so that parameters can be grouped visually, if needed (without adding groups). This flag can be changed at runtime through the `PF_UpdateParamUI()` method.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `PF_PUI_DISABLED`           | Disables (grays out) the parameter, usually in response to[PF_Cmd_USER_CHANGED_PARAM](../effect-basics/command-selectors.html).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `PF_PUI_DONT_ERASE_TOPIC`   | After Effects won’t erase parameter’s topic.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `PF_PUI_DONT_ERASE_CONTROL` | After Effects won’t erase parameter’s control.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `PF_PUI_RADIO_BUTTON`       | Not used in After Effects, but used in Premiere. Display parameter as a radio-button group. Only valid for `PF_Param_POPUP`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `PF_PUI_INVISIBLE`          | First supported in Premiere, and now supported in After Effects CS6 and later. This hides the parameter UI in both the Effect Controls and Timeline.Premiere only: The flag is dynamic and parameter visibility can be toggled during the[PF_UpdateParamUI](../effect-details/parameter-supervision.html) callback.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

除了这些标志之外，还可以通过使用[AEGP_GetDynamicStreamFlags](../aegps/aegp-suites.html)来隐藏或显示一个效果参数。

## Parameter Flags

行为标志和用户界面标志描述了一个参数的不同品质。在[PF_Cmd_PARAM_SETUP](../effect-basics/command-selectors.html)中添加参数之前设置它们。在事件中可能被设置的标志被指出。

| **Flag**                                        | **Meaning**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| ----------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_ParamFlag_CANNOT_TIME_VARY`                 | Parameter does not vary with time; no keyframe control will be provided in the Timeline panel.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_ParamFlag_CANNOT_INTERP`                    | Values are not algebraically interpolated.<br />You can still use discontinuous (hold) interpolation. Useful for parameters which are either on or off. Accelerates rendering.                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `PF_ParamFlag_COLLAPSE_TWIRLY`                  | Set this flag during[PF_Cmd_USER_CHANGED_PARAM](../effect-basics/command-selectors.html).<br />This bit can now be set & cleared when handling [PF_Cmd_UPDATE_PARAMS_UI](../effect-basics/command-selectors.html) and [PF_Cmd_USER_CHANGED_PARAM](../effect-basics/command-selectors.html) messages, so as to twirl your parameters and groups up and down at will. |
| `PF_ParamFlag_SUPERVISE`                        | Set to receive[PF_Cmd_USER_CHANGED_PARAM](../effect-basics/command-selectors.html) messages for this parameter.<br />See [Parameter Supervision](../effect-details/parameter-supervision.html) for more information.                                                                                                                                                                                                                                 |
| `PF_ParamFlag_START_COLLAPSED`                  | Controls the twirl-state of a topic spinner.<br />Can be changed during parameter supervision, not just during[PF_Cmd_PARAM_SETUP](../effect-basics/command-selectors.html).<br />This flag will not be honored unless [PF_OutFlag2_PARAM_GROUP_START_COLLAPSED](../effect-basics/PF_OutData.html) is set.                                                                                                                                   |
| `PF_ParamFlag_USE_VALUE_FOR_OLD_PROJECTS`       | This only affects the loading of projects saved with an older version of the effect which lacks parameters added later.<br />When set, the `PF_ParamDef.value` field set in `PF_ADD_PARAM()` will be used to initialize the missing parameter, but the dephault field will still be used for initial value of the parameter when the effect is newly applied or reset.<br />This is useful for when you want a parameter to default to one value but need it set to something else to preserve rendering behavior for older projects.                                                                |
| `PF_ParamFlag_LAYER_PARAM_IS_TRACKMATTE`        | Premiere Pro only: Only valid for layer parameters. Indicates that a layer param is used as a track-matte with applied filters.<br />Ignored in After Effects.                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `PF_ParamFlag_EXCLUDE_FROM_HAVE_INPUTS_CHANGED` | Only relevant if the effect sets[PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT](../effect-basics/PF_OutData.html) and will call [PF_AreStatesIdentical](../effect-details/parameter-supervision.html) or [PF_HaveInputsChangedOverTimeSpan](../effect-details/parameter-supervision.html)                                                                |
| `PF_ParamFlag_SKIP_REVEAL_WHEN_UNHIDDEN`        | New in CS6. If this parameter is unhidden, then this flag tells After Effects to not twirl open any parents and to not scroll the parameter into view in the Effect Controls panel and the Timeline panel.<br />After Effects uses this behavior internally when paint strokes are made, so as not to distract the user by revealing the parameter. However, in another case, when turning on Time Remapping, that parameter is revealed.<br />So we provide you the same control over parameters in your own effects.                                                                               |

## PF_ValueDisplayFlags

在 PF_ParamDefUnion 中，PF_FloatSliderDef 和 PF_FixedSliderDef 都有一个成员变量 PF_ValueDisplayFlags，它允许它们响应用户的像素值显示偏好(他们在信息调色板中设置)。如果设置了这个，参数的值将显示为 0-1、0-255、0-32768，或者 0.0 到 1.0，取决于偏好。你也可以设置第一个位(PF_ValueDisplayFlag_PERCENT)，在参数的显示值上附加一个百分号。

我们知道你永远不会做这样的事情，但是如果你创建了一个显示为百分比的参数，不要通过允许 0 到 100 以外的任何范围来混淆用户。请注意。百分比的意思是 "100 分之 1"。
