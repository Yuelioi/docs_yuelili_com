---
title: PF_OutData
order: 6
category:
  - AE 插件开发
---

使用 "PF_OutData "将你的插件所做的改变传达给 After Effects。更改这些字段的有效时间已注明。

## PF_OutData 成员

| **字段**                   | **描述**                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --------------------------- | ---------------------------------|
| `my_version`                | 在你的插件版本代码中（使用PF_VERSION宏）插入这个标签。Ae凭借这个标签判断加载哪个副本的效果。                                                                                                                                                                                                                                                                                              |
| `name`                      | 未使用                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `global_data`               | 每次响应都会在PF_InData中返回的一个句柄。使用Ae内存分配功能。                                                                                                                                                                                                                                                                                                                        |
| `num_params`                | Ae利用这个成员变量来核对PF_ADD_PARAM的调用次数和隐式输入层（implicit input layer）。                                                                                                                                                                                                                                                                                                                                  |
| `sequence_data`             | 从收到 [PF_Cmd_SEQUENCE_SETUP](effect-basics/command-selectors) , 开始就可以进行分配，这个句柄在随后的所有调用中会在PF_InData中返回给你。                                                                                                                                                                                                                                                                  |
| `flat_sdata_size`           | 未使用 （Ae知道这个大小，因为你会先使用分配函数得到内存）                                                                                                                                                                                                                                                                                                                                 |
| `frame_data`                | 在[PF_Cmd_FRAME_SETUP](effect-basics/command-selectors)时分配的句柄 .（如果有的话）。它不会被写入硬盘；只是用于把信息从 [PF_Cmd_FRAME_SETUP](effect-basics/command-selectors) 传到 [PF_Cmd_RENDER](effect-basics/command-selectors) 或 [PF_Cmd_FRAME_SETDOWN](effect-basics/command-selectors) 如果你调整了输出缓冲区）。一般不会占用多少内存。 |
| `width`, `height`, `origin` | [PF_Cmd_FRAME_SETUP](effect-basics/command-selectors) 指令期间如果输出图像的大小和输入的不同就去设定它。`width` and `height` 是输出缓冲区大小，`origin`是输入重映射到输出的二维向量信息。例如要往左上两方向各移动5像素进行映射投影，就设置origin为(5, 5)。                                                                                                                                           |
| `out_flags`                 | 发送信息给Ae。或者汇总多个数值。                                                                                                                                                                                                                                                                                                                                                                                           |     | `return_msg ` | Ae显示你放置的任何C字符串（每次入口指令执行后会检查和清理） |
| `start_sampL`, `dur_sampL`, `dest_snd` | 只用于音频命令。 |
| `out_flags2`                | 发送信息给Ae。或者汇总多个数值（内容跟out_flags不一样）。 |

## PF_OutFlags

这些开关(flag)向 After Effects 传递功能和状态信息。在以前的版本中，也被用来发送基本信息，例如刷新用户界面，发送错误信息。

这些功能现在已经被功能套件所取代，所有新信息传递功能都将采用这种格式。然而，功能开关仍然包含在 [PiPL](introduction/pipl-resources) 中。

当你做出改变时，请同时更新 PiPL 和你的源代码。这些开关中有许多可以在 After Effects 会话中改变。

| **Flag**                                     | **Indicates**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `PF_OutFlag_KEEP_RESOURCE_OPEN`              | 运行指令（commands）时插件需要的的所有资源都必须可用.在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间 , 虽然插件资源一直都是打开着的，但是这指令之外的时候就不行（除了[PF_Cmd_ABOUT](effect-basics/command-selectors)和 [PF_Cmd_DO_DIALOG](effect-basics/command-selectors) ),除非打开了这个开关（flag）。<br/>即：如果你需要在除[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)之外的期间里也能使用资源，就要打开这个开关。提示：我们建议加载插件时候在全局数据里和必要的存储资源，而不是让文件的资源一直开着。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `PF_OutFlag_WIDE_TIME_INPUT`                 | 效果在`current_time`以外的时间检出参数。如果您使用其他时间的参数（包括图层参数），请设置此开关。否则，Ae不能正确的缓存帧数据。<br/>在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .如果你打开了这个开关，我们强烈建议你同时打开 `PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `PF_OutFlag_NON_PARAM_VARY`                  | 打开这个开关，效果应用在静止画面时Ae就不会缓存输出。如果可能的话，Ae会缓存你的输出用来渲染其它帧。如果输出会依据某个非参数值变化，请打开这个开关。即：画面静止，参数不变，但是插件内部运算会让画面变化，（例如波浪扭曲）这个开关一定要打开，比如粒子效果就需要。<br/>在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 时进行设置。可以实时在 [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) 中改变。不过为了更好的性能，不需要时请关闭这个开关。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag_RESERVED6`                       | 没有用。以前是 PF_OutFlag_SEND_PARAMS_UPDATE. 已经被`PF_OutFlag_REFRESH_UI`替代。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `PF_OutFlag_SEQUENCE_DATA_NEEDS_FLATTENING`  | Ae和Pr都用了这个开关。在序列数据包含参考物体（例如指针和句柄）的时候需要进行线性储存转换来进行存储，并且需要解线性转换来使用，另见[PF_Cmd_SEQUENCE_RESETUP](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `PF_OutFlag_I_DO_DIALOG`                     | 插件显示出一个对话窗口来回应这个开关。 在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 期间设置, 在 [PF_Cmd_SEQUENCE_SETUP](effect-basics/command-selectors)期间检测 <br/>注意：效果对PF_OutFlag_I_DO_DIALOG的响应是不可撤销的。如果需要这样的更改，您可以在自定义UI中使用任意数据。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `PF_OutFlag_USE_OUTPUT_EXTENT`               | 插件支持`extent_rect`. 在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 期间设置.详情见章末用法.<br/>注意：SmartFX用不了这个。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `PF_OutFlag_SEND_DO_DIALOG`                  | 插件为某些功能需要显示对话框 (为了兼容PS的一些插件而加入的). <br/>After Effects 在[PF_Cmd_SEQUENCE_SETUP](effect-basics/command-selectors)后发送[PF_Cmd_DO_DIALOG](effect-basics/command-selectors) .在 [PF_Cmd_SEQUENCE_RESETUP](effect-basics/command-selectors)期间设置 , 而不是 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_DISPLAY_ERROR_MESSAGE`           | 显示一个包含`return_msg`内容的错误窗口. 只要return_msg 非空,并且这个开关打开了， Ae就会弹窗。可在任何时期设定，并可用来debug。在程序开发阶段用来提示警告信息也是极好的                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `PF_OutFlag_I_EXPAND_BUFFER`                 | 插件需要输出缓存器的时候，在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .若在这个开关打开基础上再打开 `PF_OutFlag_USE_OUTPUT_EXTENT` 可以此来使用output extent_rect 和你在[PF_Cmd_FRAME_SETUP](effect-basics/command-selectors) 期间产生的新缓存的交集区。使用 `pre_effect_source_origin` 来探测其他的转变。 <br/>注意：这开关最好在你需要的时候打开; 因为会急剧降低缓存效率。 <br/>注意2： 对SmartFX 无效。  |
| `PF_OutFlag_PIX_INDEPENDENT`                 | 一个给定像素将成为一个个体。 在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 或者 [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) 期间设定。对颜色进行修改这类型的插件就是典型的需要这个开关的例子, 相对的图像扭曲则不是。
NOTE:如果你的插件不需要取像素的颜色数值来更改周围的像素, 我们推荐打开这个开关，这会对计算速度有个显著提升。|
| `PF_OutFlag_I_WRITE_INPUT_BUFFER`            | 插件来写输入缓存。这用处很少; 当储存分配的时候,它会使一些管道缓存无效。在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag_I_SHRINK_BUFFER`                 | 插件以`extent_rect`为基准缩减缓存来获取更多的缓存和效率. 尽可能在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 期间设置.<br/>注意: 对 SmartFX无效.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `PF_OutFlag_WORKS_IN_PLACE`                  | Unused.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag_SQUARE_PIX_ONLY`                 | Unused.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag_CUSTOM_UI`                       | <br/>[PF_Cmd_EVENT](effect-basics/command-selectors) 信息。在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `PF_OutFlag_RESERVED5`                       | Unused.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag_REFRESH_UI`                      | 刷新整个特效面板、合成库和图层窗口。在[PF_Cmd_EVENT](effect-basics/command-selectors) , [PF_Cmd_RENDER](effect-basics/command-selectors) , and [PF_Cmd_DO_DIALOG](effect-basics/command-selectors) 期间设置.如果在 `PF_Cmd_EVENT`间刷新，我们推荐使用[mechanism](effect-ui-events/custom-ui-and-drawbot) 并控制好频率。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_NOP_RENDER`                      | 在[PF_Cmd_FRAME_SETUP](effect-basics/command-selectors) 期间打开，来使当前渲染无效。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `PF_OutFlag_I_USE_SHUTTER_ANGLE`             | 声明渲染图像基于`shutter_angle`的值。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag_I_USE_AUDIO`                     | 插件的数据计算需要音频时候打开，用[PF_CHECKOUT_LAYER_AUDIO](effect-details/interaction-callback-functions.interaction-callbacks) 来获得音频。.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_I_AM_OBSOLETE`                   | 在老的工程上，若插件被使用，它能发挥作用，但是不会出现在插件列表了。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_FORCE_RERENDER`                  | 声明插件的某些改动需要强制重新渲染，PF_ChangeFlag_CHANGED_VALUE也能强制重新渲染。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag_PiPL_OVERRIDES_OUTDATA_OUTFLAGS` | Ae直接用PiPL的输出开关(outflags)，忽略[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间打开的开关。 .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `PF_OutFlag_I_HAVE_EXTERNAL_DEPENDENCIES`    | 声明插件依赖于外部文件（或者字体）。如果打开这个开关，Ae会发送[PF_Cmd_GET_EXTERNAL_DEPENDENCIES](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `PF_OutFlag_DEEP_COLOR_AWARE`                | 告诉Ae 本插件支持16bpc模式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `PF_OutFlag_SEND_UPDATE_PARAMS_UI`           | 在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 期间设置, 用于接收 [PF_Cmd_UPDATE_PARAMS_UI](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `PF_OutFlag_AUDIO_FLOAT_ONLY`                | 插件需要PF_SIGNED_FLOAT格式的音频数据。为了让Ae完成格式转换，你必须且只能打开 `PF_OutFlag_AUDIO_EFFECT_TOO` 或者 `PF_OutFlag_AUDIO_EFFECT_ONLY`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_AUDIO_IIR`                       | 如果 (音频) 效果是一个无限脉冲响应滤波器（IIR filter）时, 在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .它对于一个给定时间的输出需要先前时间的数据做参量的情形有帮助。当IIR filter收到 [PF_Cmd_AUDIO_RENDER](effect-basics/command-selectors) , 音频输入时间跨度将会与输出时间跨度相等 (when they intersect with the output time span requested in [PF_Cmd_AUDIO_SETUP](effect-basics/command-selectors) ).In response to [PF_Cmd_AUDIO_SETUP](effect-basics/command-selectors) , the filter can request audio from earlier times (as for delay effects).The filter can access parameters from that earlier time, and should cache them (along with interim audio) in sequence data.If the audio generated does not correspond to the requested output audio's time, the output audio duration should be set to zero.The filter can update its delay line using the parameters and the input audio.Having cached its delay line, request more input audio during [PF_Cmd_AUDIO_SETUP](effect-basics/command-selectors) based on the last cached delay line. Use [PF_HasParamChanged](effect-detals/parameter-supervision.PF_ParamUtilSuite) to determine whether or not your cache is valid. |
| `PF_OutFlag_I_SYNTHESIZE_AUDIO`              | Set during[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) time if the effect generates audio, even when passed silence.You must also set either `PF_OutFlag_AUDIO_EFFECT_TOO` or `PF_OutFlag_AUDIO_EFFECT_ONLY`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag_AUDIO_EFFECT_TOO`                | Set during[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) if the effect alters audio.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `PF_OutFlag_AUDIO_EFFECT_ONLY`               | Set during[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) if the effect alters only audio output.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

## PF_OutFlags2

我们在 After Effects 5.0 中增加了第二套输出开关；一方面是为了在将来有扩展的空间，另一方面是为了打破自己重复使用现有开关的坏习惯。

与 "PF_OutFlags "一样，这些开关中的许多都可以在 After Effects 会话中改变。

当你做出改变时，不要忘记更新[PiPL](introduction/pipl-resources)和你的源代码。

| **Flag**                                                 | **Indicates**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| -------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `PF_OutFlag2_NONE`                                       | Nothing.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag2_SUPPORTS_QUERY_DYNAMIC_FLAGS`               | The effect responds to[PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) . Must be set in the PiPL and during [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `PF_OutFlag2_I_USE_3D_CAMERA`                            | The effect accesses 3D camera information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `PF_OutFlag2_I_USE_3D_LIGHTS`                            | The effect accesses 3D lighting information.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag2_PARAM_GROUP_START_COLLAPSED_FLAG`           | This flag in itself doesn't control the state of the param group twirlies.The initial collapse state of each individual parameter group is set during[PF_Cmd_PARAM_SETUP](effect-basics/command-selectors) , by setting the [PF_ParamFlag_START_COLLAPSED](effect-basics/PF_ParamDef.parameter-flags) flag in [PF_ParamFlags](effect-basics/PF_ParamDef.parameter-flags) . but those individual settings will not be honored unless the effect sets this bit.Otherwise, all parameter groups will be collapsed by default.Remember to set this flag in both the PiPL and here during PF_Cmd_GLOBAL_SETUP. <effect-basics/command-selectors>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag2_I_AM_THREADSAFE`                            | Currently this does nothing. If this sounds interesting to you, you may be interested in `PF_OutFlag2_PPRO_DO_NOT_CLONE_SEQUENCE_DATA_FOR_RENDER`, described below.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `PF_OutFlag2_CAN_COMBINE_WITH_DESTINATION`               | Originally added for Premiere usage, but no longer used.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag2_DOESNT_NEED_EMPTY_PIXELS`                   | Added for render optimizations; shrinks the input buffer passed to the effect to exclude any empty pixels (where empty means "zero alpha" unless `PF_OutFlag2_REVEALS_ZERO_ALPHA` is set, in which case RGB must be zero as well).Set during [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) or [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) .The origin of the trimmed buffer can be found in `in_data>pre_effect_source_origin`.Effects with both this flag and `PF_OutFlag_I_EXPAND_BUFFER` set may get called with a null input buffer if their input is completely empty, and must be able to handle this case without crashing.Note: this flag can cause the size of the output buffer to change.Note: Obsolete for SmartFX.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `PF_OutFlag2_REVEALS_ZERO_ALPHA`                         | This is the one flag implementors need to pay most attention to since it represents a change in the default behavior.Set this flag if the effect can take pixels with zero alpha and reveal the RGB data in them (like our Set Channels effect).This tells After Effects not to trim such pixels when determining the input for the effect.This flag can be changed during[PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) .Note that, while this flag can cause changes to the size of the `extent_hint`, it will not change the image buffer size.As of 6.0, pixels outside the mask's bounding box are zeroed.If your effect can reveal such pixels, tell AE not to throw away these RGB values by setting this flag.If your effect does not always reveal such pixels, set this bit dynamically.To see if your effect needs this bit set, apply a mask significantly smaller than the layer to a solid, then apply the effect and set it to its alpha-modifying state.If the rectangular bounding box of the mask becomes visible, this bit needs to be set.                                                                                                                                                                 |
| `PF_OutFlag2_PRESERVES_FULLY_OPAQUE_PIXELS`              | Preserve those pixels!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `PF_OutFlag2_SUPPORTS_SMART_RENDER`                      | The effect uses the SmartFX API.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `PF_OutFlag2_FLOAT_COLOR_AWARE`                          | The effect supports 32-bpc floating point color representation.NOTE:`PF_OutFlag2_SUPPORTS_SMART_RENDER` must also be set.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `PF_OutFlag2_I_USE_COLORSPACE_ENUMERATION`               | This is for effects which optimized for different color spaces in Premiere Pro. See the Premiere Pro SDK for more details.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `PF_OutFlag2_I_AM_DEPRECATED`                            | Setting this during[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) puts the effect in the localized "Obsolete" folder in the Effects panel.Compare to `PF_OutFlag_I_AM_OBSOLETE`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag2_PPRO_DO_NOT_CLONE_SEQUENCE_DATA_FOR_RENDER` | Supported in Premiere Pro, and not in After Effects.This affects how Premiere Pro drives the plug-in using ppro/multithreading .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT`                  | Set during[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) .Requires setting of `PF_OutFlag_WIDE_TIME_INPUT` (which allows you to support old hosts), but effectively overrides that flag.When set, all parameter checkouts are tracked so over-time dependencies are known by the host, and much more efficient.For example, if you set only the old `PF_OutFlag_WIDE_TIME_INPUT`, anytime anything changes at any time upstream from your effect, you will be called to re-render.With this flag set, if a given frame 17 has checked out things from times 0-17, AE will know that any changes at frames 18+ will not affect that cached frame.Note that if you use this new flag, you must not cache any time-dependent data in your sequence data (or anywhere else), unless you also validate that [cache](effect-details/global-sequence-frame-data.validating-sequence-data) using `PF_GetCurrentState()` / `PF_AreStatesIdentical()` from effect-detals/parameter-supervision.PF_ParamUtilSuite before using the time-dependent data.This only works for SmartFX (those that set `PF_OutFlag2_SUPPORTS_SMART_RENDER`).If you haven't set that, After Effects will silently treat this as `PF_OutFlag_WIDE_TIME_INPUT` instead. |
| `PF_OutFlag2_I_USE_COMP_TIMECODE`                        | Set during[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) .This lets AE know it should rerender an effect if the composition start time and/ or drop-frame setting has been modified.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag2_DEPENDS_ON_UNREFERENCED_MASKS`              | New in CS6. Set this if you are going to look at paths that aren't directly referenced by a path param, e.g. if you are going to draw a stroke on all masks.This is needed so After Effects knows to invalidate your output when a mask is modified that doesn't appear to be referenced by your effect.Set during[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) or [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag2_OUTPUT_IS_WATERMARKED`                      | New in CS6. Set this during[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) if your output is going to be watermarked in some way that makes it unsuitable for final use, probably because the user is using an unlicensed demo version.It is ok to change this state during the course of app session during [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) , if e.g. a floating license status changes.Plug-in authors that actually do have this state changing asynchronously must be careful to have the next render match the last state returned from [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) otherwise race conditions could cause incorrect frames to be cached.(This is a non-issue if you only change this in response to `DO_DIALOG`.)                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `PF_OutFlag2_SUPPORTS_GPU_RENDER_F32`                    | New in 16.0 Set during PF_Cmd_GLOBAL_SETUP, this indicates GPU support.The effect will be called with GPU selectors, and will be badged as GPU-supporting in the GUI.At `PF_Cmd_GPU_DEVICE_SETUP` time, these flags indicate rendering capabilities for a specific device and framework.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag2_SUPPORTS_THREADED_RENDERING`                | Available in After Effects Beta builds starting June 2020, After Effects 2022.Set during `PF_Cmd_GLOBAL_SETUP`, this indicates the effect supports rendering on multiple threads at the same time. Single or multiple applications of this effect on a layer can be called to render at the same time on multiple threads.This flag indicates the effect supports rendering on multiple threads at the same time. Single or multiple applications of this effect on a layer can be called to render at the same time on multiple threads.If you are using the `PF_OutFlag_SEQUENCE_DATA_NEEDS_FLATTENING` flag, remember to also set the `PF_OutFlag2_SUPPORTS_GET_FLATTENED_SEQUENCE_DATA` flag. See sequence-data for more information.Note**This flag should only be set on plugins that have been tested to be thread-safe with multi-frame rendering enabled in AE.**For more information on how to use this flag, please see effect-details/multi-frame-rendering-in-ae under Effect Details.                                                                                                                                                                                                                                           |
| `PF_OutFlag2_MUTABLE_RENDER_SEQUENCE_DATA_SLOWER`        | Available in After Effects Beta builds starting March 2021, After Effects 2022.Indicates the effect needs sequence_data replicated for each render thread, thus allowing each render to have sequence_data which can be written to. Note that changes to sequence_data will be discarded regularly, currently after each span of frames is rendered such as single RAM Preview or Render Queue export.Note**This flag should only be set on plugins that have been tested to be thread-safe with multi-frame rendering enabled in AE.**For more information on how to use this flag, please see effect-details/multi-frame-rendering-in-ae under Effect Details.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
