---
title: PF_OutData
order: 6
category:
  - AE 插件开发
---

使用 "PF_OutData "将你的插件所做的改变传达给 After Effects。更改这些字段的有效时间已注明。

## PF_OutData 成员

| **字段**                   | **描述**                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| --------------------------- | ---------------------------------|
| `my_version`                | 在你的插件版本代码中（使用PF_VERSION宏）插入这个标签。Ae凭借这个标签判断加载哪个副本的效果。                                                                                                                                                                                                                                                                                              |
| `name`                      | 未使用                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `global_data`               | 每次响应都会在PF_InData中返回的一个句柄。使用Ae内存分配功能。                                                                                                                                                                                                                                                                                                                        |
| `num_params`                | Ae利用这个成员变量来核对PF_ADD_PARAM的调用次数和隐式输入层（implicit input layer）。                                                                                                                                                                                                                                                                                                                                  |
| `sequence_data`             | 从收到 [PF_Cmd_SEQUENCE_SETUP](effect-basics/command-selectors) , 开始就可以进行分配，这个句柄在随后的所有调用中会在PF_InData中返回给你。                                                                                                                                                                                                                                                                  |
| `flat_sdata_size`           | 未使用 （Ae知道这个大小，因为你会先使用分配函数得到内存）                                                                                                                                                                                                                                                                                                                                 |
| `frame_data`                | 在[PF_Cmd_FRAME_SETUP](effect-basics/command-selectors)时分配的句柄 .（如果有的话）。它不会被写入硬盘；只是用于把信息从 [PF_Cmd_FRAME_SETUP](effect-basics/command-selectors) 传到 [PF_Cmd_RENDER](effect-basics/command-selectors) 或 [PF_Cmd_FRAME_SETDOWN](effect-basics/command-selectors) 如果你调整了输出缓冲区）。一般不会占用多少内存。 |
| `width`, `height`, `origin` | [PF_Cmd_FRAME_SETUP](effect-basics/command-selectors) 指令期间如果输出图像的大小和输入的不同就去设定它。`width` and `height` 是输出缓冲区大小，`origin`是输入重映射到输出的二维向量信息。例如要往左上两方向各移动5像素进行映射投影，就设置origin为(5, 5)。                                                                                                                                           |
| `out_flags`                 | 发送信息给Ae。或者汇总多个数值。                                                                                                                                                                                                                                                                                                                                                                                           |     | `return_msg ` | Ae显示你放置的任何C字符串（每次入口指令执行后会检查和清理） |
| `start_sampL`, `dur_sampL`, `dest_snd` | 只用于音频命令。 |
| `out_flags2`                | 发送信息给Ae。或者汇总多个数值（内容跟out_flags不一样）。 |

## PF_OutFlags

这些开关(flag)向 After Effects 传递功能和状态信息。在以前的版本中，也被用来发送基本信息，例如刷新用户界面，发送错误信息。

这些功能现在已经被功能套件所取代，所有新信息传递功能都将采用这种格式。然而，功能开关仍然包含在 [PiPL](introduction/pipl-resources) 中。

当你做出改变时，请同时更新 PiPL 和你的源代码。这些开关中有许多可以在 After Effects 会话中改变。

| **Flag**                                     | **Indicates**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `PF_OutFlag_KEEP_RESOURCE_OPEN`              | 运行指令（commands）时插件需要的的所有资源都必须可用.在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间 , 虽然插件资源一直都是打开着的，但是这指令之外的时候就不行（除了[PF_Cmd_ABOUT](effect-basics/command-selectors)和 [PF_Cmd_DO_DIALOG](effect-basics/command-selectors) ),除非打开了这个开关（flag）。<br/>即：如果你需要在除[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)之外的期间里也能使用资源，就要打开这个开关。提示：我们建议加载插件时候在全局数据里和必要的存储资源，而不是让文件的资源一直开着。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `PF_OutFlag_WIDE_TIME_INPUT`                 | 效果在`current_time`以外的时间检出参数。如果您使用其他时间的参数（包括图层参数），请设置此开关。否则，Ae不能正确的缓存帧数据。<br/>在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .如果你打开了这个开关，我们强烈建议你同时打开 `PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `PF_OutFlag_NON_PARAM_VARY`                  | 打开这个开关，效果应用在静止画面时Ae就不会缓存输出。如果可能的话，Ae会缓存你的输出用来渲染其它帧。如果输出会依据某个非参数值变化，请打开这个开关。<br/>即画面静止，参数不变，但是插件内部运算会让画面变化，（例如波浪扭曲）这个开关一定要打开，比如粒子效果就需要。<br/>在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 时进行设置。可以实时在 [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) 中改变。不过为了更好的性能，不需要时请关闭这个开关。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag_RESERVED6`                       | 没有用。以前是 PF_OutFlag_SEND_PARAMS_UPDATE. 已经被`PF_OutFlag_REFRESH_UI`替代。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `PF_OutFlag_SEQUENCE_DATA_NEEDS_FLATTENING`  | Ae和Pr都用了这个开关。<br/>在序列数据包含参考物体（例如指针和句柄）的时候需要进行线性储存转换来进行存储，并且需要解线性转换来使用，另见[PF_Cmd_SEQUENCE_RESETUP](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `PF_OutFlag_I_DO_DIALOG`                     | 插件显示出一个对话窗口来回应这个开关。 <br/>在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 期间设置, 在 [PF_Cmd_SEQUENCE_SETUP](effect-basics/command-selectors)期间检测 <br/>注意：效果对PF_OutFlag_I_DO_DIALOG的响应是不可撤销的。<br/>如果需要这样的更改，您可以在自定义UI中使用任意数据。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `PF_OutFlag_USE_OUTPUT_EXTENT`               | 插件支持`extent_rect`. <br/>在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 期间设置.详情见章末用法.<br/>注意：SmartFX用不了这个。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `PF_OutFlag_SEND_DO_DIALOG`                  | 插件为某些功能需要显示对话框 (为了兼容PS的一些插件而加入的). <br/>After Effects 在[PF_Cmd_SEQUENCE_SETUP](effect-basics/command-selectors)后发送[PF_Cmd_DO_DIALOG](effect-basics/command-selectors) .在 [PF_Cmd_SEQUENCE_RESETUP](effect-basics/command-selectors)期间设置 , 而不是 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_DISPLAY_ERROR_MESSAGE`           | 显示一个包含`return_msg`内容的错误窗口. 只要return_msg 非空,并且这个开关打开了， Ae就会弹窗。<br/>可在任何时期设定，并可用来debug。在程序开发阶段用来提示警告信息也是极好的                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `PF_OutFlag_I_EXPAND_BUFFER`                 | 插件需要输出缓存器的时候，在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .若在这个开关打开基础上再打开 `PF_OutFlag_USE_OUTPUT_EXTENT` 可以此来使用output extent_rect 和你在[PF_Cmd_FRAME_SETUP](effect-basics/command-selectors) 期间产生的新缓存的交集区。使用 `pre_effect_source_origin` 来探测其他的转变。 <br/>注意：这开关最好在你需要的时候打开; 因为会急剧降低缓存效率。 <br/>注意2： 对SmartFX 无效。  |
| `PF_OutFlag_PIX_INDEPENDENT`                 | 一个给定像素将成为一个个体。 在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 或者 [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) 期间设定。对颜色进行修改这类型的插件就是典型的需要这个开关的例子, 相对的图像扭曲则不是。NOTE:如果你的插件不需要取像素的颜色数值来更改周围的像素, 我们推荐打开这个开关，这会对计算速度有个显著提升。|
| `PF_OutFlag_I_WRITE_INPUT_BUFFER`            | 插件来写输入缓存。用处很少; 当储存分配的时候,它会使一些管道缓存无效。在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag_I_SHRINK_BUFFER`                 | 插件以`extent_rect`为基准缩减缓存来获取更多的缓存和效率. 尽可能在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 期间设置.<br/>注意: 对 SmartFX无效.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `PF_OutFlag_WORKS_IN_PLACE`                  | Unused.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag_SQUARE_PIX_ONLY`                 | Unused.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag_CUSTOM_UI`                       | [PF_Cmd_EVENT](effect-basics/command-selectors) 信息。在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `PF_OutFlag_RESERVED5`                       | Unused.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag_REFRESH_UI`                      | 刷新整个特效面板、合成库和图层窗口。在[PF_Cmd_EVENT](effect-basics/command-selectors) , [PF_Cmd_RENDER](effect-basics/command-selectors) , and [PF_Cmd_DO_DIALOG](effect-basics/command-selectors) 期间设置<br/>如果在 `PF_Cmd_EVENT`间刷新，我们推荐使用[mechanism](effect-ui-events/custom-ui-and-drawbot) 并控制好频率。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_NOP_RENDER`                      | 在[PF_Cmd_FRAME_SETUP](effect-basics/command-selectors) 期间打开，来使当前渲染无效。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `PF_OutFlag_I_USE_SHUTTER_ANGLE`             | 声明渲染图像基于`shutter_angle`的值。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag_I_USE_AUDIO`                     | 插件的数据计算需要音频时候打开，用[PF_CHECKOUT_LAYER_AUDIO](effect-details/interaction-callback-functions.interaction-callbacks) 来获得音频。.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_I_AM_OBSOLETE`                   | 在老的工程上，若插件被使用，它能发挥作用，但是不会出现在插件列表了。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_FORCE_RERENDER`                  | 声明插件的某些改动需要强制重新渲染，PF_ChangeFlag_CHANGED_VALUE也能强制重新渲染。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag_PiPL_OVERRIDES_OUTDATA_OUTFLAGS` | Ae直接用PiPL的输出开关(outflags)，忽略[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间打开的开关。 .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `PF_OutFlag_I_HAVE_EXTERNAL_DEPENDENCIES`    | 声明插件依赖于外部文件（或者字体）。如果打开这个开关，Ae会发送[PF_Cmd_GET_EXTERNAL_DEPENDENCIES](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `PF_OutFlag_DEEP_COLOR_AWARE`                | 告诉Ae 本插件支持16bpc模式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `PF_OutFlag_SEND_UPDATE_PARAMS_UI`           | 在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 期间设置, 用于接收 [PF_Cmd_UPDATE_PARAMS_UI](effect-basics/command-selectors) .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `PF_OutFlag_AUDIO_FLOAT_ONLY`                | 插件需要PF_SIGNED_FLOAT格式的音频数据。为了让Ae完成格式转换，你必须且只能打开 `PF_OutFlag_AUDIO_EFFECT_TOO` 或者 `PF_OutFlag_AUDIO_EFFECT_ONLY`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag_AUDIO_IIR`                       | 如果 (音频) 效果是一个无限脉冲响应滤波器（IIR filter）时, 在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .它对于一个给定时间的输出需要先前时间的数据做参量的情形有帮助。<br/>当IIR filter收到 [PF_Cmd_AUDIO_RENDER](effect-basics/command-selectors) , 音频输入时间跨度将会与输出时间跨度相等 (当它们与[PF_Cmd_AUDIO_SETUP](effect-basics/command-selectors)中请求的输出时间跨度相交时 )<br/>为了响应 [PF_Cmd_AUDIO_SETUP](effect-basics/command-selectors) , 滤波器可以请求更早时间的音频（比如延迟效果）.滤波器可以访问较早时间的参数，并应将它们（连同临时音频）缓存在序列数据中。<br/>如果生成的音频与请求的输出音频的时间不对应，则输出音频持续时间应设置为零。滤波器可以使用参数和输入音频更新其延迟线。缓存其延迟线后，在[PF_Cmd_AUDIO_SETUP](effect-basics/command-selectors) 期间 根据最后缓存的延迟线请求更多输入音频。<br/>使用[PF_HasParamChanged](effect-detals/parameter-supervision.PF_ParamUtilSuite) 确定您的缓存是否生效 |
| `PF_OutFlag_I_SYNTHESIZE_AUDIO`              | 如果效果生成音频,在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置,即使经过静音也是如此。.还必须设置`PF_OutFlag_AUDIO_EFFECT_TOO`或`PF_OutFlag_AUDIO_EFFECT_ONLY`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag_AUDIO_EFFECT_TOO`                |如果插件更改了音频,在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) if the 期间设置                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `PF_OutFlag_AUDIO_EFFECT_ONLY`               | 如果插件只改变了输出音频,在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

## PF_OutFlags2

我们在 After Effects 5.0 中增加了第二组输出开关；一方面是为了在将来有扩展的空间，另一方面是为了盖章目前重复使用现有开关的坏习惯。

与 "PF_OutFlags "一样，这些开关中的许多都可以在 After Effects 会话中改变。

当你做出改变时，不要忘记更新[PiPL](introduction/pipl-resources)和你的源代码。

| **Flag**                                                 | **Indicates**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| -------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `PF_OutFlag2_NONE`                                       | Nothing.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag2_SUPPORTS_QUERY_DYNAMIC_FLAGS`               | 插件回应[PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) . 必须在PiPL中,以及[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置 .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `PF_OutFlag2_I_USE_3D_CAMERA`                            | 插件访问摄像机信息                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `PF_OutFlag2_I_USE_3D_LIGHTS`                            | 插件访问3D灯光信息                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag2_PARAM_GROUP_START_COLLAPSED_FLAG`           | 这个开关自身不能控制参数组的收拢或展开。每个参数组的初始折叠状态是在[PF_Cmd_PARAM_SETUP](effect-basics/command-selectors)期间设置的——通过设置 [PF_ParamFlags](effect-basics/PF_ParamDef.parameter-flags) 中的 [PF_ParamFlag_START_COLLAPSED](effect-basics/PF_ParamDef.parameter-flags)<br/>但是这些单独的设置将不会被接受，除非效果设置了它们。否则默认情况下，所有参数组都将被折叠。<br/>请记住在PiPL和PF_Cmd_GLOBAL_SETUP期间设置此开关。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag2_I_AM_THREADSAFE`                            | 目前没用。如果感兴趣的话，可以看下后面的`PF_OutFlag2_PPRO_DO_NOT_CLONE_SEQUENCE_DATA_FOR_RENDER`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `PF_OutFlag2_CAN_COMBINE_WITH_DESTINATION`               | 原本是给Premiere用的，现在没用了。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag2_DOESNT_NEED_EMPTY_PIXELS`                   | 用于渲染优化；排除空白像素（alpha为0的区域，如果设置了`PF_OutFlag2_REVEALS_ZERO_ALPHA` 则是RGBA都为0的区域）减小输入缓冲区。<br/>在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 或 [PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors)期间设置 .缩小后的缓冲区的开始位置可以在`in_data>pre_effect_source_origin`中找到.同时设置这个开关和 `PF_OutFlag_I_EXPAND_BUFFER` 可能会出现空输入缓冲区(null input buffer)。<br/>如果输入确实为空，必须保证这种情况下别让程序崩溃。<br/>提示：这个开关会让输出缓冲区的大小改变。<br/>提示：不适用于SmartFX                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `PF_OutFlag2_REVEALS_ZERO_ALPHA`                         | 因为它会对默认的一些处理做出改变，所以需要特别注意这个开关。如果你的效果想要显示透明像素中的RGB，就要设置这个开关，Ae就不会在处理输入图像的时候修剪掉0 alpha像素的RGB数值。这个开关可以在[PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors)时改变。<br/>需要注意的是，这个开关会改变 `extent_hint`, i的大小，但是不会改变图像缓冲区大小。<br/>对于6。0版本，遮罩外的像素会被舍弃。如果你的效果可以显示这些像素，通过设定这个开关来告诉Ae不要修剪掉这些像素的RGB值。<br/>如果你写的效果不是总显示那些RGB，就要动态地改变这个开关.用一个方法可以看出你的效果是否需要设置这个开关：在固态层上画一个比这个层小的遮罩，加上效果，并设置alpha修剪状态(alpha-modifying state)(棋盘样子的按钮)。<br/>如果矩形遮罩的外面可见，就需要设置这个开关。|                                                                                                                                                                |
| `PF_OutFlag2_PRESERVES_FULLY_OPAQUE_PIXELS`              | 保护那些完全不透明的像素(PRESERVES_FULLY _OPAQUE_PIXELS)！                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `PF_OutFlag2_SUPPORTS_SMART_RENDER`                      | 效果会使用SmartFX API。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `PF_OutFlag2_FLOAT_COLOR_AWARE`                          | 支持32位浮点色彩显示。提示：必须也要同时设置`PF_OutFlag2_SUPPORTS_SMART_RENDER`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `PF_OutFlag2_I_USE_COLORSPACE_ENUMERATION`               | 为了优化Premiere Pro中的不同色彩空间。详情查看Premiere Pro SDK。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `PF_OutFlag2_I_AM_DEPRECATED`                            | 如果想把效果放进“过时(Obsolete)”分类中，就要在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)时加上这个开关。和 `PF_OutFlag_I_AM_OBSOLETE`要区分开。.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PF_OutFlag2_PPRO_DO_NOT_CLONE_SEQUENCE_DATA_FOR_RENDER` | 用在Pr中，会影响Pr驱动多线程插件的方式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT`                  | 在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 时进行设置，需要设置 `PF_OutFlag_WIDE_TIME_INPUT` （支持旧版本），但实际上就是对这个需要设置的开关的一个补充。打开这个开关后，所有参数会被追踪，所以用户做出改变的与之前的相关性(over-time dependencies)会被Ae记录，这将更高效。<br/>例如，若你只设置了先前的开关`PF_OutFlag_WIDE_TIME_INPUT`, ，插件属性稍稍一改，你就需要重新渲染一大段。而打开这个开关，比如从第17帧中检测出发生在0-17的事件，Ae会知道18帧以后的部分不会影响已经缓存的帧。<br/>需要注意的是如果你打开了这个新开关，你不能[缓存](effect-details/global-sequence-frame-data.validating-sequence-data)以时间为依据的数据在序列数据（或其他任何地方）中，除非在使用以时间为依据的数据之前用[PF_ParamUtilSuite3](../effect-details/parameter-supervision.html#effect-detals-parameter-supervision-pf-paramutilsuite)`PF_GetCurrentState()` / `PF_AreStatesIdentical()`来检查缓存。 <br/>这个功能只适用于SmartFX （因此要打开 `PF_OutFlag2_SUPPORTS_SMART_RENDER`).如果没有设置的话，Ae会默认只打开PF_OutFlag_WIDE_TIME_INPUT并无视此开关。 |
| `PF_OutFlag2_I_USE_COMP_TIMECODE`                        | 在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors) 时打开这个开关。这个开关打开后，当改变合成开始时间或者drop-frame设置时Ae会重新渲染一遍该插件。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `PF_OutFlag2_DEPENDS_ON_UNREFERENCED_MASKS`              | CS6新功能。如果想要非参数控制的路径，可以打开这个开关。例如，你想描出所有的遮罩，当遮罩被改变的时候，Ae会重新渲染。在[PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)或[PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors)期间设置.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `PF_OutFlag2_OUTPUT_IS_WATERMARKED`                      | CS6新功能。在 [PF_Cmd_GLOBAL_SETUP](effect-basics/command-selectors)期间设置, 你的输出就会有水印，让它不能用作最终输出，可以用在为你的插件做试用版的时候。<br/>这块可以在启动时的[PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) 被更改，例如：许可证信息发生变化。插件作者事实上不会让这块实时变化，所以要注意下一次渲染和[PF_Cmd_QUERY_DYNAMIC_FLAGS](effect-basics/command-selectors) 返回来的要匹配，否则的话，会导致缓存错误的帧。（如果你只是为了回应`DO_DIALOG`才改变，就不用管这个事了）                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `PF_OutFlag2_SUPPORTS_GPU_RENDER_F32`                    | 16.0 新功能 在 PF_Cmd_GLOBAL_SETUP 期间, 表明GPU的支持。效果将调用GPU选择器，并将标记为图形用户界面中的GPU支持。在`PF_Cmd_GPU_DEVICE_SETUP`时，这些开关表示特定设备和帧的渲染能力。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `PF_OutFlag2_SUPPORTS_THREADED_RENDERING`                | 在2020年6月开始的After Effects Beta版本中可用，在“PF_Cmd_GLOBAL_SETUP”中，表示效果支持同时在多个线程渲染。可以调用图层上的单个或多个此效果应用程序在多个线程上同时渲染。<br/>如果使用的 _PF_OutFlag_SEQUENCE_DATA_NEEDS_FLATTENING_ 开关，请同时设置 _PF_OutFlag2_SUPPORTS_GET_FLATTENED_SEQUENCE_DATA_ 开关。<br/>更多信息，请参阅序列数据。注意 **此开关应仅设置在已测试为线程安全的插件上，并在AE中启用了多帧渲染。** 有关如何使用此开关的更多信息，请参阅效果详细信息目录下的多帧渲染。                                                                                                                                                                                                                                        |
| `PF_OutFlag2_MUTABLE_RENDER_SEQUENCE_DATA_SLOWER`        | 在2021年3月开始的AE测试版中可用，AE2022。表示效果需要每个渲染线程复制`sequence_data`，从而允许每个渲染具有可以写入的sequence_data。请注意，对sequence_data的更改将定期丢弃，目前是在渲染每帧跨度之后，例如单帧RAM预览或渲染队列导出。注意**此开关应仅在已测试为线程安全的插件上设置，并在AE中启用了多帧渲染。** <br/>使用此开关的更多信息，请参阅效果详细信息目录下的多帧渲染。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
