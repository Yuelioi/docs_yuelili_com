---
title: 改变参数顺序的好方法
order: 20
category:
  - AE 插件开发
---

可以从插件中添加或删除参数，而无需强制用户重新应用该插件的所有实例以使用更新的版本。但是，您需要提前进行一些计划以允许此类更改。您的用户（和技术支持人员）将感谢您的努力。

您必须首先创建一个参数数组索引。在*PF_Cmd_PARAM_SETUP*期间，使用简单的枚举为每个参数添加索引值。枚举的顺序对应于参数在PF_Cmd_PARAM_SETUP期间的注册顺序，这反过来又决定了它们在效果控制和时间轴面板中出现的顺序。

为磁盘ID创建另一个枚举。此枚举的顺序不得更改，但您可以添加到此列表的末尾。请注意，此列表的顺序不必与参数数组索引的顺序相对应。参数磁盘ID的范围应为1到9999。为什么不是零？说来话长…

在AE插件编程的早期“狂野西部”时代，开发人员不费心设置ID是相当普遍的。AE意识到这一点，检查了由这种效果添加的第一个参数的ID；如果它为零，则假定程序员没有费心去ID参数；然后AE为每个人分配自己的ID。如果你从不设置参数ID，这个假设工作得很好，但是如果你开始从NULL编号你的ID，就不太好了。这就是原因。

在调用`PF_ADD_PARAM()`之前，在*PF_ParamDef.uu.id*字段中指定磁盘ID。如果没有指定值，AE会使参数从1开始按顺序排列。保存时，参数的信息会用这个ID标记。这样，AE仍然可以理解，虽然您的“Foobarocity”滑块现在是传递的第四个参数，但它与第二个参数时是相同的参数。

要删除参数而不强制重新应用，请删除创建参数的代码及其在参数数组索引列表中的条目。但是，不要删除磁盘ID列表中的条目。要添加新参数，请在参数数组索引列表中的适当位置添加条目，添加参数创建代码，并将磁盘ID附加到磁盘ID枚举的末尾。要重新排序，请更改参数数组索引列表并适当地重新排序参数创建代码。

## 更改默认值？更改ID

如果您不这样做，如果有人使用旧默认值保存项目，然后在安装新效果的情况下将其读入，则该参数将更改为新的默认值。

立即！即时支持响应

这是来自[Parameter Flags](../effect-basics/PF_ParamDef.html)的 "PF_ParamFlag_USE_VALUE_FOR_OLD_PROJECTS" 的另一个主要用例，
