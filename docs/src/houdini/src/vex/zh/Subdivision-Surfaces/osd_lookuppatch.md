---
title: osd_lookuppatch
order: 7
category:
  - vex
---

`int osd_lookuppatch(<geometry>geometry, int face_id, float face_u, float face_v, int &patch_id, float &patch_u, float &patch_v)`

如果你不指定纹理属性，该函数使用内在的多边形插值。

`int osd_lookuppatch(<geometry>geometry, int face_id, float face_u, float face_v, int &patch_id, float &patch_u, float &patch_v, string attribute)`

如果你指定了一个纹理属性，该函数会使用该属性中的 UV 来将面的坐标转换到 OSD 补丁上。

给出 "face_id "和面内某点的纹理坐标（"face_u "和 "face_v"），这个函数将返回相应的 "patch_id"（Catmull-Clark 细分面）和补丁插值（"patch_u "和 "patch_v"）。从补丁映射到面的反向函数是[osd_lookupface](osd_lookupface.html) () ("输出对应于 OSD 补丁上给定坐标的 Houdini 面和 UV 坐标。") 。

## Arguments

`<geometry>`

当在一个节点的上下文中运行时（比如一个 wrangle SOP），这个参数可以是一个整数，代表要读取几何图形的输入数字（从 0 开始）。

或者，该参数可以是一个字符串，指定一个几何文件（例如，一个`.bgeo'）来读取。当在Houdini内部运行时，这可以是一个`op:/path/to/sop`的引用。

`face_id`

Houdini 多边形面的原始编号。

`face_u`, `face_v`

细分补丁中要映射到胡迪尼基元的坐标。这些值应该在 0 到 1 的范围内。不是所有的值都对三角形有效。纹理坐标应根据传入的属性来指定。如果你传递了无效的坐标，该函数将失败并返回 "0"。

`&patch_id`

该函数用相应的 OSD 补丁编号来覆盖这个变量。这也是在执行 PTex 纹理映射时用来识别面部的整数值。

`&patch_u`, `&patch_v`

该函数用 OSD 补丁上相应的 U/V 坐标覆盖了这些变量。

## Returns

`1`表示成功，`0`表示错误。

## Examples



```c
// This function can be used to move points generated by a scatter SOP to the
// subdivision limit surface. The scatter SOP needs to store the "sourceprim"
// (the Output Attributes tab). Texture coordinates also need to be
// transferred from the source geometry.
void
movePointToLimitSurface(string file; vector P, uv; int sourceprim)
{
 int patch_id = -1;
 float patch_u, patch_v;
 if (osd_lookuppatch(file, sourceprim, uv.x, uv.y,
 patch_id, patch_u, patch_v, "uv"))
 {
 vector tmpP;
 if (osd_limitsurface(file, "P", patch_id, patch_u, patch_v, tmpP))
 P = tmpP;
 }
}

```

## See also

- [osd_lookupface](osd_lookupface.html)
- [osd_patchcount](osd_patchcount.html)
- [osd_facecount](osd_facecount.html)
- [osd_firstpatch](osd_firstpatch.html)
- [osd_limitsurface](osd_limitsurface.html)

|
subd

[osd_facecount](osd_facecount.html)

[osd_firstpatch](osd_firstpatch.html)

[osd_limitsurface](osd_limitsurface.html)

[osd_limitsurfacevertex](osd_limitsurfacevertex.html)

[osd_lookupface](osd_lookupface.html)

[osd_lookuppatch](osd_lookuppatch.html)

[osd_patchcount](osd_patchcount.html)

[osd_patches](osd_patches.html)
